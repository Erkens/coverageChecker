#!/usr/bin/env php
<?php
namespace exussum12\CoverageChecker;

require_once (__DIR__ . "/../functions.php");

setUp();
$minimumPercentCovered = getMinPercent();

$matcher = new FileMatchers\EndsWith();
$diff = new  DiffFileLoader($argv[1]);
$phpunit = new XMLReport($argv[2]);
$coverageCheck = new CoverageCheck($diff, $phpunit, $matcher);

$lines = $coverageCheck->getCoveredLines();

handleOutput($lines, $minimumPercentCovered);
